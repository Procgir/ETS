## Цели и задачи
**Цель:**
Продемонстрировать, полученные навыки по реализации клиент-серверных приложений в рамках изучаемого стека технологий: c#, asp.net core, docker, postgresql, keycloak, redis, serilog и другими инструментами и библиотеками, используемыми ранее

**Задачи:**
- Реализовать API методы, описанные в техническом задании, покрывающие базовый сценарий работы сервиса, по аналогии с проделанными упражнениями (см. список **Методы**)
- спроектировать и реализовать дополнительные методы API, необходимые для демонстрации работы сервиса в рамках сценария
- спроектировать и реализовать новую функцию в соответствии с запросом заказчика
- найти ошибки в логике работы методов и исправить
- написать тесты к реализованному функционалу исходя из важности функционала
- продемонстрировать весь pipeline работы приложения через прохождения по сценарию

---
## Теория

### Методы:

| Номер | Доступ                 | Контроллер (базовый Route)    | Название                         | HttpMethod | Путь                       | Результат                                                                   | Готовность |
| ----- | ---------------------- | :---------------------------- | -------------------------------- | ---------- | -------------------------- | --------------------------------------------------------------------------- | ---------- |
| 1     | Учитель/Ученик         | UserController                | Логин                            | Get        | /login                     | Пользователь авторизован в системе и выдан token для входа                  | +          |
| 2     | Учитель/Ученик         | UserController                | Регистрация                      | Post       | /register                  | Пользователь зарегистрирован в системе, появился в БД. Можем найти по Login | +          |
| 3     | Учитель                | TestController (/tests)       | Создать тест                     | Post       |                            | Тест создан в системе, появился в БД. Можем найти по testId                 | +*         |
| 4     |                        |                               | Получить тесты                   | Get        | ?pageNumber&pageSize       | Получен список тестов преподавателя                                         | +*         |
| 5     |                        |                               | Удалить тест                     | Delete     | /{testId}                  | Тест удален, в БД отсутствует                                               | +*         |
| 6     |                        |                               | Изменить тест                    |            | Patch                      | Тест изменен, данные в БД изменены                                          | +*         |
| 7     |                        |                               | Получить тест                    | Get        | /{testId}                  | Получена информация по тесту преподавателя                                  | +*         |
| 8     |                        |                               | Получить тест по запросу         | Get        | ?q                         | Получен список тестов, удовлетворящих запросу                               | +*         |
| 9     |                        | TestingController (/testings) | Получить тестирования            | Get        | ?pageNumber&pageSize       | Получен список тестирований, удоавлетворяющий запросу                       | +*         |
| 10    |                        |                               | Назначить тестирование           | Post       |                            | Создано тестирование на группу, появилось в БД                              | +*         |
| 11    |                        |                               | Получить тестирование            | Get        | /{testingId}               | Получена информация о тестировании                                          | +*         |
| 12    |                        |                               | Удалить активное тестирование    | Delete     | /{testingId}               | Удалено тестирование в случае, если оно активно. В БД исчезла информация    | -          |
| 13    |                        |                               | Получить тестирования по запросу | Get        | ?q                         | Получен список тестирований, удовлетворяющий запросу                        | -          |
| 14    | Ученик                 | TestingController (/tests)    | Получить тестирования            | Get        | ?pageNumber&pageSize       | Получен список тестирований, назначенных на ученика                         | -          |
| 15    |                        |                               | Получить тестирование по запросу | Get        | /{testingId}               | Получена информация по тестированию, назначенная на ученика                 | -          |
| 16    |                        |                               | Получить вопросы по тестированию | Get        | /{testingId}/questions     | Получен список вопросов по тестированию, назначенных на ученика             | -          |
| 17    |                        |                               | Отправить ответы по тестированию | Post       | /{testingsId:guid}/answers | Ответы ученика сохранены. В БД появился                                     | +*         |
| 18    |                        |                               | Изменить ответы по тестированию  | Patch      | /{testingsId:guid}/answers | Ответы по тестированию изменены у активного тестирования                    | +*         |
| 19    | Admin* (Преподаватель) | AdminController (/admin)      | Генерирует данные                | POST       | ?                          | Генерирует данные для учителя, необходимые для базового сценария            | -          |
| 20    | Admin* (Преподаватель) | AdminController (/admin)      | Завершает тестирование           | Post       | ?                          | Немедленно завершает тестирование                                           | -          |


### Базовый Сценарий:
1. Преподаватель регистрируется в системе
2. Преподаватель логинится в системе
3. Преподаватель создает 1 тест (10 вопросов, правильный вариант ответа  - 1)
4. Преподаватель получает информацию по созданному тесту (3)
5. Преподаватель генерирует данные для себя: 1 группа из 9 учеников, 9 тестов (10 вопросов, правильные ответы = i % Номер_вопроса), 9 назначенных тестирований на группу (4 активных, 5 завершенных)
6. Преподаватель получает информацию по его тестам (3 + 5)
7. Преподаватель назначает тестирование на созданную группу (5), по прохождению созданного теста (3)
8. Преподаватель получает информацию по созданному тестированиею (7)
9. Преподаватель получает информацию по тестированиям (5 + 7)
10. Ученик регистрируется в системе и выбирает сгенерированную группу (5)
11. Ученик логинится в системе
12. Ученик получает информацию по тестированиям (5 + 7)
13. Ученик получает информацию по назначенному преподавателем тестированию (7)
14. Ученик отправляет ответы на назначенное тестирование (7), так чтобы у него была оценка 4
15. Ученик получает тестирования (5 + 7), в созданном отображается оценка 4
16. Преподаватель получает информацию по назначенному тестированию (7)
17. Преподаватель вызывает метод заблаговременного завершения созданного тестирования (7)
18. Ученик отправляет новые ответы на назначенное тестирование (7), так чтобы у него была оценка 3. Получает ошибку, т.к. тестирование завершено

### Таблица сравнения анализа

| Номер | Решение | +   | -   | Выбранное решение |
| ----- | ------- | --- | --- | ----------------- |
| 1     | Р1      | ... | ... | ...               |
- Номер. Номер сравниваемого объекта
- Сравниваемый объект. Описание сравниваемого объекта
- +. Конструктивное и аргументированное описание в пользу использования решения
- -. Конструктивное и аргументированное описание НЕ в пользу использования решения
- Выбранное решение. Галочка
### Таблица обратной связи

| Номер | Самооценка | Оценка Ревьювер 1 | Оценка Ревьювер 2 | Самооценка по проделанной работе | Обратная связь Ревьювер 1 | Обратная связь Ревьювер 2 |
| ----- | ---------- | ----------------- | ----------------- | -------------------------------- | ------------------------- | ------------------------- |
| 1     | 0.4        | 0.6               | 0.3               | ...                              | ...                       | ...                       |

- Номер. Номер упражнения по ДЗ
- Самооценка. Сколько пунктов присваевашь себе по результатам работы над упражнением. Количество пунктов за упражнение - [0, 1] дробное значение. 0 - полный ноль, 1 - твердый стержень кремень
- Оценка Ревьювер 1. Сколько пунктов поставил Ревьювер1 по результатам ревью результатов работы над упражнением. Количество пунктов за упражнение - [0, 1] дробное значение. 0 - полный ноль, 1 - твердый стержень кремень
- Оценка Ревьювер 2. Сколько пунктов поставил Ревьювер2 по результатам ревью результатов работы над упражнением. Количество пунктов за упражнение - [0, 1] дробное значение. 0 - полный ноль, 1 - твердый стержень кремень
- Самооценка по проделанной работе. Что получилось хорошо, что не получилось и над чем стоит поработать?
- Обратная связь Ревьювер 1. Обратная связь Ревьювера 1 по результатам ревью результатов работы над упражнением по методике STAR (за что можно похвалить? над чем нужно поработать/точки роста?)
- Обратная связь Ревьювер 2. Обратная связь Ревьювера 2 по результатам ревью результатов работы над упражнением по методике STAR (за что можно похвалить? над чем нужно поработать/точки роста?)


### **Гайд по методике STAR для Ревьюеверов

#### **Что такое STAR?**

Методика **STAR** (Situation, Task, Action, Result) помогает давать **четкую и полезную** обратную связь.
- **1. Situation (Ситуация)**. Опиши, в каком модуле/задании/функционале найдена проблема или успех.
- **2. Task (Задача)**. Укажи, что _нужно было сделать_ по условию задачи.
- **3. Action (Действие)** Конкретно назови, что сделал исполнитель (или не сделал).
-  **4. Result (Результат)** Объясни последствия: баг, неоптимальное решение или успех.

#### **✅ Пример КАЧЕСТВЕННОЙ работы**

##### **Situation (Контекст)**
_"В ДЗ №3 нужно было доработать API для фильтрации товаров."_
##### **Task (Задача)**
_"Требовалось добавить параметры `price_from`, `price_to` и `category_id` в эндпоинт `/api/products`."_
##### **Action (Что сделано хорошо)**
_"Ты:_
1. _Добавил валидацию входных параметров,_
2. _Покрыл код юнит-тестами (включая пограничные значения),_
3. _Обновил Swagger-документацию."_
##### **Result (Итог)**
*"API работает стабильно, фронтенд-разработчики сразу поняли, как им пользоваться. Тесты выявили 0 багов."*

**Вердикт:**  
_"Отличная работа! Видно, что ты продумал все edge-кейсы."_

#### **❌ Пример НЕКАЧЕСТВЕННОЙ работы**

##### **Situation (Контекст)**
_"В том же ДЗ №3 (фильтрация товаров)..."_
##### **Task (Задача)**
_"Нужно было:_
1. _Реализовать фильтрацию,_
2. _Вернуть 400 ошибку при некорректных параметрах,_
3. _Написать интеграционные тесты."_
##### **Action (Проблемы)**
_"Ты:_
1. _Не проверил, что `price_from` не может быть больше `price_to`,_
2. _Написал только 1 тест (успешный сценарий),_
3. _Не добавил описание новых параметров в Swagger."_
#### **Result (Последствия)**
_"Если передать `price_from=1000&price_to=500`, API молча вернет пустой список вместо ошибки. Фронтенду придется делать лишние проверки."_

**Рекомендации:**
1. _Добавь валидацию для `price_from`/`price_to`._
2. _Покрой тестами кейсы: отрицательные цены, `price_from > price_to`._
3. _Документируй параметры в Swagger (примеры, обязательность)._

## Практика

### 1 Реализовать API методы, описанные в техническом задании, покрывающие базовый сценарий работы сервиса
см. запись

### 2 Спроектировать и реализовать дополнительные методы API, необходимые для демонстрации работы сервиса в рамках сценария
см. запись
### 3 Спроектировать и реализовать новую функцию в соответствии с запросом заказчика
см. запись
### 4 Найти ошибки в логике работы методов и исправить
см. запись
### 5 Написать тесты к реализованному функционалу исходя из важности функционала
см. запись

### Демонстрация решения
см. запись

---
## Упражения
### 1 Реализовать API методы, описанные в техническом задании, покрывающие базовый сценарий работы сервиса
1. Реализовать метод API [12]
2. Реализовать метод API [13]
3. Реализовать метод API [14]
4. Реализовать метод API [15]
5. Реализовать метод API [16]

**Ожидаемый результат:**
- реализованы необходимые методы API, работают без критических ошибок 
### 2 Спроектировать и реализовать дополнительные методы API, необходимые для демонстрации работы сервиса в рамках сценария
1. Спроектировать метод [19]
	1. указать входные данные запроса
	2. указать роут
	3. указать выходные данные ответа
2. Реализовать метод [19]
	1. Описать алгоритм
	2. Описать + и - выбранного решения
3. Спроектировать метод [20] 
	1. указать входные данные запроса
	2. указать роут
	3. указать выходные данные ответа
4. Реализовать метод [20]
	1. Описать алгоритм
	2. Описать + и - выбранного решения
5. Описать результаты проектирования и выбора решения в виде сравнительной таблицы

**Ожидаемый результат:**
- спроектированы и реализованы необходимые методы API, работают без критических ошибок
- описаны результаты проектирования

### 3 Спроектировать и реализовать новую функцию в соответствии с запросом заказчика
Необходимо добавить возможность указания нескольких правильных ответов у теста. Количество правильных ответов у теста (> 1, но  < Количество_вариантов_ответов) Например, Количество_вариантов_ответов = 4, тогда количество_правильных_ответов - [1;4)):
- опишите минимум 2 решения и сравните их
	-  укажите в каких частях проекта необходимо будет внести изменения
	- +
	- -
	- стоимость реализации в человеко часах
	- сложность реализации
- выберите одно из них и обоснуйте свой выбор
- реализуйте выбранное решение
- опишите насколько ожидания и реальность выбранного решения и его реализации совпали, какие проблемы это повлекло

**Ожидаемый результат:**
- приведен анализ выбора решения
- реализованы методы API необходимые для реализации функционала, работают без критических ошибок
- приведены выводы об успешности выбранного решения после его реализации
### 4 Найти ошибки в логике работы методов и исправить
В рамках проекта есть места, в которых допущены ошибки, необходимо: (воспроизводится при тестировании сценария):
- Найти ошибки и исправить
	- все критические ошибки. Критическая - блокирующая работу базового сценария или работу функционала 
	- минимум 1 не критическую. Некритическая обратная критической
- Объяснить какую проблему создает и при каких условиях возникает
- Как исправили и почему выбрано это решение

**Ожидаемый результат:**
- исправлены критические ошибки
- исправлена минимум 1 не критическая ошибка
- приведено объяснение о результатх анализа и исправления
### 5 Написать тесты к реализованному функционалу исходя из важности функционала
- Написать минимум 1 unit test на новый функционал с указанием нескольких правильных ответов и объяснить причины выбора этого сценария для автотеста по критерию важности. Расскройте, что для вас является критерием важности
- Написать минимум 1 integration test на новый функционал с указанием нескольких ответов и объяснить причины выбора этого сценария для автотеста по критерию важности. Расскройте, что для вас является критерием важности
- Написать 1 functional test на базовый сценарий (ЗАДАЧА СО ЗВЕЗДОЧКОЙ), опционально

**Ожидаемый результат:**
- приведено описание критериев важности
- выбранные сценария для автоматизации тестирования соответствуют критериям
- прогон тестов зеленый без ошибок

### Допуск к итоговой защите:
- Выполнены базовые требования, которые описаны в 0 занятии
- Предварительное подтверждение, что удалось запустить проект
	- Скриншот прогона тестов на последнем выполненном задании
	- Скриншот запущенных докер контейнеров
	- Скриншот Swagger
	- Скриншот PostMan
	- Скриншот админки Serilog
	- Скриншот админки KeyCloak
- Наличие ссылки на Форк репозиторий по курсу в группе чата, в котором:
	- шаблон названия feature-веток ДЗ:  1-homework-N-exercise (N - номер упражнения)
	- созданы и закрыты MR (слияние в master новым комитом) по всем упражнениям
	- у MR 2 аппрува от ревьюверов, назначенных преподавателем
	- есть комментарий от исполнителя перед ревью: 
	  "Сделано. Селфревью проведено. Протестировано. Все работает без критических ошибок. Некритичные Ошибки: {список_ ошибок_если_есть}"
	- осмысленные сообщения в комитах
	- описание, которые требуется делать в рамках упражнения, необходимо добавлять в файл 1-homework-N-exercise.md (где N - номер упражнения) и положить в каталог КОРЕНЬ_ПРОЕКТА/Homeworks/
	- Замечания по ревью
		- Если у ревьювером не было замечаний по ревью, то необходимо ревьюверу написать 1 комментарий: "Замечаний нет. Все пункты и требования сделаны. Все отлично работает"
		- Если ревьювер оставил комментарий, с которым не согласны необходимо решить это коллегиально в 3м (принятие решения осуществляется по принципу большинства с фиксацией голосов в отдельном комментарии в треде). Пример: Приняли решение внести правку, т.к. .... Р1, И
	- Комментарии должны удовлетворять (В ином случае это может влиять на итоговый результат Ревьювера):
		- конструктивная критика: приведены аргументы, оцениваем результат, а не человека
		- описание проблемы и последствий (свободная форма, ссылки на источники)
		- предложение по решению однозначное
- наличие заполненной таблицы обратной связи
	- Она не обязана носить положительный характер, но она должна отражать результаты выполненного задания и/или свое искреннее мнение (без преувеличений, без преуменьшений, без обмана, без сокрытия, беспристрастная). Если обратная связь сомнительная и не отражает результатов работы исполнителя, не удовлетворяет требованиям, тогда итоговое решение/оценка в ведомость у ревьюверов и исполнителя будет ниже на 1 пункт (пример: Р1, Р2, И. Р1 халатно отнесся к обратной связи И, в процессе кроссревью и тестированию. эта обратная связь оказалась на итоговой защите. При демонстрации выяснилось, что ОС противоречит результатам и была сделана для галочки, была неконструктивна и т.д. Тогда у Р1, Р2, И итоговая оценка будет ниже на 1 пункт)

### Формат итоговой защиты:
- Продемонстрировать работу сервиса на базовом сценарии
	- перед запускам показываются написанные тесты и они отрабатывают без ошибок
	- накатываются миграции схемы БД
	- запуск сервисов происходит через docker-compose
	- после запуска в DBeaver демонстрируется созданная БД с заранее подготовленными запросами к таблицам, которые показывают наполняемость БД тестовыми данными, а также наличие созданной схемы
	- в docker desktop отображаются созданные контейнеры
	- в Serilog можно зайти и посмотреть логи по запросам и отследить сессию пользователя по TraceId. в процессе демонстрации необходимо будет выборочно показать запись логов по отправленным запросам
	- отправку запросов на регистрацию и логирование необходимо продемонстрировать через Postman. Остальные запросы можно делать через Swagger
	- Swagger открывается и корректно работает
	- при демонстрации сценариев работы API не возникает критических ошибок: приложение работает стабильно и следующий вызов метода по пути пользователя не блокирует движение по pipeline процесса
	- продемонстрирован весь путь пользователей согласно сценарию: учитель, ученик
	- получены удовлетворительные ответы на вопросы в процессе демонстрации решения, показывающие знания по работе сервиса в рамках проекта

### Критерии оценки по результатам выполнения ДЗ
- За засчитанное упражнение можно получить максимум 1 пункт. Упражнение считается засчитанным, если оно удовлетворяет требованиям, либо вы доказали, что неполный результат вашей работы, который может даже не соответствовать требованиям, претендует на указанную вами оценку
- Общее требование к оценке результатов работы: если вы нечестны по отношению к себе, друг к другу, преподавателю при выполнении упражнения, то автоматически за него начисляется  "-1" пункт (пример, вы говорите, что все делали, тестировали, но у вас не работает базовый функционал на старте. вы описали, что человек отлично справился с работой, а у него ничего не работает. и так далее)
- Помните, что ваши действия и отношение могут повлиять на оценку одногруппников и изменить в сторону 0 их итоговый результат
- Итоговая Оценка формируется на основе всей информации по результатам работы над ДЗ в рамках каждого упражнения в том числе влияние оказывает качество Ревью и Тестирование НЕ своих результатов работы
- Сумма пунктов конвертируется в итоговые баллы в ведомость как: Балл_В_Ведомость = Сумма_Пунктов / 5 * 100

---
## FAQ
Если у вас возникли вопросы по занятию или общие обратитесь к [FAQ](https://docs.google.com/spreadsheets/d/1_n-wfeDpjv3-NcWxreu7minH0JQ-ooQb9B1KtNMU0eI/edit?usp=sharing)
Возможно ответ уже находится там

Если ответа на вопрос там нет. Напишите его и я обязательно дам ответ

**Инструкция**:
1. Запросите права доступа к таблице, если у вас нет доступа
2. Если вопрос по конкретному занятию, тогда зайдите во вкладку с **названием занятия**, по которому у вас возник вопрос, иначе зайдите на вкладку **Общие**
3. Напишите Вопрос в столбце **Вопрос**
4. Напишите Фамилию Имя в столбце **Автор**
5. Повторите действия
	1. Укажите Статус Ожидает 
	2. Дождитесь ответа. У вопроса будет статус Ответ дан
	3. Если ответ требует уточнения перевидте вопрос в статус Требует уточнения и напишите комментарий в столбце Комментарий
	4. Повторите, пока не получите ответ на свой вопрос
6. Переведите ответ в статус Завершен
7. Если ответ вам помог разобраться, увеличьте число в колонке **Лайки**, это поможет понять насколько эти вопросы общие и вынести ответы в материалы курса

Спасибо, что оставили вопрос, благодаря этому курс может стать лучше

---
## Обратная связь
**Обязательная обратная связь**
Для автоматизации процесса контроля за работой учеников и улучшения курса необходимо **обязательно** оставить [обратную связь по курсу](https://docs.google.com/forms/d/e/1FAIpQLSfOZTyNNNA-GDpWapoh7g_fmHYYpO8_1ZnoWsDyQTubAHvrFw/viewform?usp=dialog)
Обратная связь обязательно с точки зрения факта отправки, но нет цели заставить вас что-то писать в ней, если вам нечего сказать.

**Необязательная обратная связь** (АНОНИМНАЯ)
Если вам есть, что сказать по занятиям, но вы по каким-то причинам не готовы этим поделиться в обязательной форме обратной связи, то буду очень благодарен, если оставите ее в [анонимной обратной связи](https://docs.google.com/forms/d/e/1FAIpQLSfvVEkllf7gLIlkZLLwKXgkLVbj2sHrX4wMT4dcCeICE-K1rQ/viewform?usp=dialog)